<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="From Lowlevel &#34;Machine Code&#34;  To Highlevel &#34;Langeuage&#34;, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>From Lowlevel &#34;Machine Code&#34;  To Highlevel &#34;Langeuage&#34; | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">From Lowlevel &#34;Machine Code&#34;  To Highlevel &#34;Langeuage&#34;</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Computer-Systems/">
                                <span class="chip bg-color">Computer Systems</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Computer-Systems/" class="post-category">
                                Computer Systems
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-01-16
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-09-01
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    5.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    23 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="from-lowlevel-machine-code-to-highlevel-langeuage">From Lowlevel "Machine Code" To Highlevel "Langeuage"</h1>
<p><a href="https://yintelligence.tech/2021/01/15/2021-01-15-Computer-Systems/">VUB 4004876EER Computer Systems</a> + <a target="_blank" rel="noopener" href="https://vub.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=5236a5b2-9e73-4c5b-8c5d-ac4100a8659c">Video</a> + <a target="_blank" rel="noopener" href="https://canvas.vub.be/courses/20575/files?preview=564912">Slide</a></p>
<h2 id="the-structure-of-computer-计算机结构">1. The structure of Computer 计算机结构</h2>
<h3 id="the-sequential-computer">1. 1 The Sequential Computer</h3>
<p>在计算机内部，所有信息都以<strong>整数integer、定长fixed length、数字numbers</strong>的方式进行编码。</p>
<p>为了在外界和计算机之间传输信息，需要键盘、显示器、打印机、温度传感器、加速度计等。我们称它们为输入或输出input or output接口interfaces。</p>
<p><u>通常信息在被引入计算机后<strong>不能立即处理</strong></u>。例如，如果想知道温度是否在攀升，则需要将从温度传感器获得的实际值与从同一传感器获得的先前值进行比较。因此，计算机具有<strong>数据存储器</strong>data memory，可以<u><strong>根据需要存储数字</strong></u>。这些数字最终<u>可以从该存储器中<strong>取出fetch</strong></u>，由算术计算器arithmetic calculator组合，结果也存储在data memory中。</p>
<p>计算机各部分执行的不同操作由<strong>控制单元control unit</strong>启动，该控制单元<u>在<strong>适当的时候</strong>根据指定任务的<strong>需要</strong>向这些<strong>不同部分</strong>发送电信号。</u>这称为“<strong>执行指令execution of an instruction</strong>”。指令Instructions通过整数编码，存储在程序存储器program memory中。Control unit将这些instruction一条一条地取出fetch并依次execute执行。要执行的list of instructions通过输入接口加载到program memory中，这里称为“<strong>程序接口program interface</strong>”。</p>
<p><img src="/images/OP/0853520.png" /></p>
<p><strong>Data memory stores data, and program memory stores instructions.</strong></p>
<ul>
<li><strong>Input or output interfaces</strong>: keyboards, displays or printers. But some process control I/O are embedded in physical systems.</li>
<li><strong>Data memory</strong>: stores data an long as needed.</li>
<li><strong>Arithmetic calculator</strong>: fetches data from data memory and calculates. Then store data in the data memory again.</li>
<li><strong>Control unit</strong>: sends electrical signals to different parts for the specified task. That is <strong>execution of an instruction</strong>.</li>
<li><strong>Program memory</strong>: stores instructions that are encoded by means of integer numbers.</li>
</ul>
<p>The computer memory stores fixed length number and identified by <strong>address</strong>.</p>
<h3 id="memories">Memories</h3>
<blockquote>
<p>Data Memory：可以看作一个抽屉架，如果我要改变其中一个抽屉里的东西，必定会清除掉原来抽屉的东西。</p>
</blockquote>
<p>作为第一个类比，可以将计算机内存视为抽屉柜，每个抽屉可以容纳一个<strong><u>one, fixed length, integer number</u></strong>，并由一个数字标识，称为“<strong>address</strong>”。 将号码存储在抽屉中会<strong>automatically discard</strong>之前存储在该抽屉中的number 。</p>
<p>作为在我们将考虑的最低级别计算机如何执行给定任务的示例，我们将讨论一个简单的电子锁。输入接口为数字键盘，输出接口为电磁锁。</p>
<p><img src="/images/OP/0853523.png" /></p>
<p>尽管计算机中的所有数据和指令都被编码为整数，但我们将在此处为这些数字的值命名，以帮助我们记住它们的功能。Data memory中的address被赋予一个名称，以evoke存储在该地址的数字的功能。</p>
<ul>
<li>ND 将包含已按下的button数</li>
<li>SC，通过键盘输入的密码的值</li>
</ul>
<p>The input and output interfaces被视为data memory中的<strong>特殊位置</strong>。</p>
<p>只要没有按下按钮，<strong>Location KFL</strong>（键盘标志）就会包含 0。按下按钮后，它包含一个 1，直到在该位置写入 0。当 KFL 包含 1 时，KDA（键盘数据）包含一个 0 到 9 之间的整数，对应于已按下的键。Unlocking the door时，只要在DDA（Door Data）中写一个1就可以了。</p>
<blockquote>
<p>以#符号开头的数值表示指令将该值解释为操作数而不是操作数的地址</p>
<p>A numerical value preceded by the # sign means that the instruction will interpret that value as an operand rather than as the address of an operand</p>
</blockquote>
<p>可以观察到这里描述的计算机有两个存储器，一个用于data ，一个用于instructions。对于为特定应用程序设计和制造的绝大多数计算机而言，情况就是如此。用于data和instructions的<u>number of digits位数</u>以及每个内存可以存储的数字数量可以为每个内存<strong>单独选择</strong>，并针对特定应用进行优化。</p>
<p>当计算机必须运行的应用程序事先未知时，分别优化word length和两个内存中的每一个的memory size变得毫无意义。然后最好将两个memories物理组合成一个，其字长word length是<u>对<strong>大多数</strong>应用程序<strong>有用</strong>的数据size</u>和允许对控制单元可以执行的各种instructions<u>进行efficient encoding的instructions size</u>之间的折衷。这种计算机被称为“<strong>冯诺依曼计算机Von Neuman computers</strong>”。 大多数通用计算机，如智能手机、平板电脑、笔记本电脑、台式机和服务器，都采用冯诺依曼架构。</p>
<p>Von Neumann architecture <u>combines data memory and program memory.</u></p>
<p><img src="/images/OP/0853524.png" /></p>
<p>在大多数通用计算机中，内存在物理上分为几个部分，具有不同的属性:</p>
<ul>
<li><strong>Central memory （中央存储器）</strong>: <strong>fast</strong>, <strong>expensive</strong> part for storing data the programs that used at the moment;</li>
<li><strong>Peripheral memory（外围存储器）</strong>: <strong>slower</strong>, <strong>less expensive</strong> memory for data and programs for future use, e.g. solid state disks.</li>
<li><strong>Archival stores（档案存储）</strong>: <strong>very slow access</strong> but <strong>huge storage capacity</strong> and <strong>high reliability</strong>, e.g. cassettes.</li>
</ul>
<p><strong>CPU （Central Processor Units, 中央处理器）</strong> in a single silicon ship with cooling devices including heating pipes and fans 一个或多个中央处理器单元内置于单个硅芯片中，由于此类芯片耗散大量功率，因此它们通常安装在包括热管和风扇在内的冷却设备中。</p>
<h3 id="arithmetic-unit">1.2 Arithmetic unit</h3>
<blockquote>
<p>这里会提到有关指令：Instruction Format</p>
</blockquote>
<h4 id="instructions">1.2.1 Instructions</h4>
<p><strong>数据处理指令data handling （arithmetic） instruction</strong>由 5 个独立的项组成:</p>
<ul>
<li>The <strong>nature</strong> of the operation that needs to be performed</li>
<li>The addresses in data memory of the two operands that need to be <u>combined by an arithmetic operation</u>需要通过算术运算合并的两个操作数在中的address</li>
<li>The address in data memory where the result of the operation needs to be stored数据存储器中需要存储操作结果的address</li>
<li>the address of <strong>next instruction</strong> will be <strong>fetch</strong>ed in program memory程序存储器中将提取下一条指令的地址。</li>
</ul>
<p><img src="/images/OP/0853521.png" /></p>
<p>如果只存在data handling指令，则执行指令的<u>顺序</u>将是<u><strong>预先确定</strong></u>的，<strong>不受某些数据项值的影响</strong>。因此，需要第二种指令，即<strong>控制指令control instructions</strong>。在<strong>控制指令control instructions</strong>中，<u>比较两个数据项的值</u>，下一条要取的指令的地址<strong>取决于比较的结果</strong>。</p>
<p><img src="/images/OP/0853522.png" /></p>
<h2 id="low-level-language">2.1 Low Level Language</h2>
<h3 id="machine-language">2.1.1 Machine language</h3>
<p>前面已经提到，程序和数据在计算机内总是以<strong>整数、固定长度、数字</strong>的形式进行编码。这种形式的程序被称为<strong>机器语言Machine language</strong>。</p>
<p>这种加载在计算机program memory中的代码也称为“<strong>Object code目标代码</strong>”。</p>
<h3 id="assembler汇编">2.1.2 Assembler（汇编）</h3>
<blockquote>
<ul>
<li>加载assembler</li>
<li>一行一行翻译</li>
<li>把翻译好的OC放入内存加载</li>
<li>执行</li>
</ul>
<p>特性</p>
<ul>
<li>它保存了变量、接口等东西的符号名字</li>
<li>操作通常也都有一个唤醒（evoke）用的名字</li>
<li>会出现一些无意义的操作名，比如“结束”“开始”，这种叫做Pseudo Instruction</li>
</ul>
<p>于是问题就来了，在之前提到过，assembler是一行一行翻译，那么我们后面定义的操作标签，如果在前面调用了该咋整？</p>
<p>两种解决方案：</p>
<ul>
<li>one pass：扫描到不认识的东西，先留下memory space，之后填上</li>
<li>two pass：我直接扫描翻译两遍</li>
</ul>
<p>之后，介绍一个定义Macro（宏）：</p>
<p>其实就是因为懒，有一些重复性的东西，用一个代号代替，以后就直接写代号。</p>
</blockquote>
<p>给instructions和memory locations命名，这称为汇编语言assembler language。汇编语言中的<u>每条指令对应于机器语言中的一条instruction</u>。汇编语言被称为“低级语言low level language”（LLL）。用 LLL 编写的程序比用机器语言编写的程序更容易被人类理解。当这些程序由人类编写时，它们是称为“<strong>Source Code源代码</strong>”。 它们通常通过称为“<strong>汇编程序assembler</strong>”的翻译程序翻译成机器语言。Assembler生成Object code（机器语言），可以加载到计算机的程序存储器中。</p>
<p><img src="/images/OP/08535231.png" /></p>
<blockquote>
<p>正如将在第 3章中解释的那样，此处显示的instruction最多有 4 个字段fields，而不是 5 个。</p>
</blockquote>
<p>当下一条要执行的指令位于程序存储器program memory的下一个地址时，在指令中<strong>没有明确</strong>给出。</p>
<p>当然，用 LLL 编写的程序需要先翻译成机器语言machine language，然后才能加载到program memory中。</p>
<p><img src="/images/OP/085352310.png" /></p>
<p>here are 4 steps for translating a LLL program and executing it:</p>
<ol type="1">
<li><p>The assembler program be loaded in the program memory.</p></li>
<li><p>Translating it into object code.</p>
<blockquote>
<p>Then, that translating program can read, line by line the source code written in a LLL from a peripheral memory and translate it, line by line, into object code, which is COPYred in memory (normally, peripheral memory).</p>
</blockquote></li>
<li><p>The newly object code be loaded in the program memory.</p></li>
<li><p>Object code be executed, reading user's data and producing results.</p></li>
</ol>
<blockquote>
<p>当然，第 1 步和第 2 步使用的计算机可能与第 3 步和第 4 步使用的计算机不同。</p>
<p>当运行用户程序的计算机是一台非常小的机器，缺乏外围存储器和友好的用户界面时，通常会出现这种情况。</p>
</blockquote>
<h3 id="machine-vs-assembly-language">2.1.3 Machine vs Assembly language</h3>
<ul>
<li><em>Variables</em> keep their <em>symbolic</em> name</li>
<li><em>IO interfaces</em> keep their <em>symbolic</em> name</li>
<li>Operation codes receive a name that evokes the performed action</li>
<li>each machine instruction corresponds to <strong>one</strong> assembly language instruction</li>
<li><strong>An assembly language program have pseudo instructions which a special commands for the assembler</strong></li>
</ul>
<h3 id="source-code-format">2.1.4 Source Code Format</h3>
<p><img src="/images/OP/085352311.png" /></p>
<p>Program memory中的addresses也可以接收符号symbolic名称name：在上面的示例中，BGN 和 KLP 是将在某些控制指令之后获取的指令的地址。例如，在发现 KFL 等于 0 或发现 ND 不同于 3 后，将提取地址 KLP 处的指令。这些symbolic名称只是通过将它们写在它们代表的地址的指令前面来定义。</p>
<h3 id="pseudo-instructions">2.1.5 Pseudo-instructions</h3>
<p>当需要将 LLL 程序翻译成object code时，需要向翻译程序提供一些指示。 例如，程序将从data or program memory中的哪个地址加载。这通常是通过向程序中添加看起来像真正指令但未转换为机器指令的<strong>伪指令pseudo-instructions</strong>来实现的。</p>
<p><img src="/images/OP/085352312.png" /></p>
<p>在上面的例子中，两条 ORG <strong>伪指令pseudo-instructions</strong>告诉汇编器数据存储器从地址 101 开始，而程序存储器从地址 11 开始，对于变量 ND 和 SC，需要在数据存储器中保留一个存储器字，变量 KFL、KDA 和 DDA 分别有固定地址 1,2 和 3，定义在普通数据存储器之外。伪指令 END 通知汇编器它已到达要翻译的程序的末尾。</p>
<h3 id="forward-reference">2.1.6 Forward Reference</h3>
<p><img src="/images/OP/085352313.png" /></p>
<p>翻译 LLL 相当简单。 实际上只有一个问题需要特别注意：在定义之前使用symbolic name（例如上例中的 Next）时，这称为“<strong>前向引用forward reference</strong>”。</p>
<blockquote>
<p>当程序逐行翻译时，翻译器不知道EQ应该使用什么地址？ 指令，因为 Next 尚未定义。</p>
</blockquote>
<p>有两种方法可以解决<strong>forward reference</strong>问题：</p>
<ul>
<li><p>One pass</p></li>
<li><ul>
<li><p>Object code stored in <strong>central memory</strong> with empty spaces for the unknown addresses;</p></li>
<li><p>Fast but needs lots of memory space;</p>
<blockquote>
<p>目标代码保存在中央存储器中，为仍然未知的地址留有空白空间，这些地址在定义这些地址时被填充。这种方法当然要求整个目标代码可以保存在中央存储器中。</p>
</blockquote></li>
</ul></li>
<li><p>Two pass</p></li>
<li><ul>
<li>source code is translate <strong>twice</strong>;</li>
<li>first pass: set up a symbol table about all symbolic names;</li>
<li>second pass: generate object code;</li>
<li>small but slow;</li>
</ul></li>
</ul>
<p><img src="/images/OP/085352314.png" /></p>
<blockquote>
<p>源代码被翻译两次，第一次只是建立一个符号表，其中存储所有符号名称及其值，第二次生成目标代码。</p>
</blockquote>
<p>至于计算符号名对应的地址，需要进行<strong>几乎完整</strong>的翻译，遗憾的是没有使用这种翻译来生成最终的目标代码。 一些两遍汇编器在第一遍期间生成部分翻译并在第二遍期间完成它。</p>
<h3 id="variable-length-instructions">2.1.7 Variable Length Instructions</h3>
<p>Instruction length can be function of value of operands</p>
<ul>
<li>One pass Assemblers
<ul>
<li>Always maximum length with forward references</li>
<li><u>Request <strong>hint</strong> from programmer</u></li>
<li><u>wrong hints result in assembler error message</u></li>
</ul></li>
<li>Multi pass assemblers
<ul>
<li><em>n variable length forward references solved by n + 1 passes</em></li>
<li>Always maximum length with forward references</li>
<li><u>Request <strong>hint</strong> from programmer</u></li>
<li><u>wrong hints result in assembler error message</u></li>
</ul></li>
</ul>
<p>The translator requests the programmer to <u>give a hint about which <strong>variant</strong> of the instruction should be used.</u> If hint is wrong, the translator generate an error message or a warning.</p>
<p><u>当指令的长度取决于其操作数的值时，可能会危及一遍和两遍汇编器的正确工作。</u></p>
<p>确实，有些处理器有可以引用8位、16位或32位地址的指令，在知道操作数的长度之前，汇编器无法知道应该使用哪个版本的指令。 如果 n 是可以影响指令长度的前向引用数，则可以证明通过实现 n+1 遍翻译器，可以正确处理所有前向引用。</p>
<p>然而，这种技术<strong>几乎从未使用过</strong>。 相反，要求程序员向翻译器提示应该使用指令的哪个变体。 如果提示错误，翻译器可以生成错误消息或警告，程序员可以更改提示。</p>
<h3 id="macro-instruction-宏">2.1.8 Macro instruction 宏</h3>
<h4 id="macro-assembler">2.1.8.1 Macro Assembler</h4>
<p>Instead of multiple uses of identical sequences of instructions, can define a macro instruction.</p>
<p><img src="/images/OP/085352315.png" /></p>
<p>在低级编程中，多次使用相同的指令序列，最终使用不同的参数经常发生，如幻灯片左侧所示。不用重复写入序列 LDA、LDB、MUL 及其操作数，我们可以定义带有两个形式参数 &amp;1 和 &amp;2 的宏指令 MULB，并用适当的实际操作数引用 MULB 来替换多次出现的序列 LDA、LDB、MUL ，如幻灯片右侧所示。</p>
<p>接受宏的汇编器首先在source code中展开宏（右侧显示的程序被替换为左侧显示的程序），然后将整个程序转换为object code</p>
<h4 id="macros-in-high-level-languages">2.1.8.2 Macros in High Level languages</h4>
<p>宏不仅用于低级语言，还用于高级语言，例如 c，其中#include 命令允许插入在别处定义的程序的特定部分。</p>
<h4 id="macro-expanders">2.1.8.3 Macro expanders</h4>
<p><img src="/images/OP/085352316.png" /></p>
<p>在将源代码翻译成目标代码之前，宏通常由预处理器pre-processor处理，适用于处理任何编程语言中的宏。 这种宏扩展器实际上只是一个sophisticated merging of text operations的文本处理器。</p>
<p>对于大多数 LLL 存在的宏库，包含宏来执行许多简短但经常使用的操作，例如，计算有符号数的绝对值。</p>
<h4 id="macros-vs-functions">2.1.8.4 Macros vs Functions</h4>
<ul>
<li>Macros
<ul>
<li>Static Expansion</li>
<li>Waste of memory</li>
<li>Fast</li>
</ul></li>
<li>Functions
<ul>
<li>Dynamic Expansion</li>
<li>Save memory space</li>
<li>Slow</li>
</ul></li>
</ul>
<p>事实上，对于肤浅的观察者来说，宏看起来就像高级语言中常用的函数、过程或方法。 然而，它们是根本不同的，从某种意义上说，生成的程序包含与“called”一样多的宏副本，而<strong>只存在一个函数副本</strong>，每次调用函数时都会使用该副本 . 可以说宏将函数调用的开销从执行时间转移到编译或组装时间。 <strong>它们通常比函数更快，但需要更多内存</strong>!</p>
<h2 id="linker">3. Linker</h2>
<blockquote>
<p>一个程序如果是由不同的文件组成，就需要一个连接用的<strong>Program</strong>,就是linker</p>
<p>每一个部分分别进行翻译，再运行之前组合在一起。</p>
<p>那么就需要一个定位的代码（relocatable object code）</p>
</blockquote>
<p>大型程序很少由一个人完成，现有的部分被重复使用，新的部分通常由一个团队完成。在单个操作中将此类程序的源代码转换为目标代码是不切实际的。最好在程序执行之前将不同的部分分别翻译并组合在一起。</p>
<p><img src="/images/OP/085352317.png" /></p>
<p>这可以通过使用所谓的可重定位目标代码relocatable object code实现，该目标代码可以通过称为链接器的特定程序与其他可重定位目标代码片段链接在一起，以获得可执行目标代码executable object code。</p>
<h3 id="relocatable-code">3.1 Relocatable Code</h3>
<p>Relocatable code has 3 parts:</p>
<ul>
<li><p><strong>The object code(CODE)</strong>: containing all the instructions and addresses about separate piece of relocatable code were to be loaded in memory</p>
<ul>
<li>Program to be loaded from address 0</li>
<li>List of all location dependant addresses</li>
</ul>
<blockquote>
<p>从地址 0 开始，与此代码一起创建一个表，其中包含代码中所有需要修改的位置，如果程序将使用其他不是 0 的起始地址加载到内存中。</p>
</blockquote></li>
<li><p><strong>The externals table(EXTERNALS)</strong>: containing all symbolic names without being defined in that piece referred to programs and the locations in the code that need to be changed when the actual address corresponding to that symbolic name becomes known</p>
<ul>
<li>Symbolic names to be imported</li>
<li>Addresses where these externals are referenced</li>
</ul></li>
<li><p><strong>The entry points table(ENTRY POINTS)</strong>: containing symbolic names that are defined and may be referenced from outside. It also contains the corresponding address</p>
<ul>
<li>Symbolic names that can be referenced elsewhere</li>
<li>Address corresponding to the symbolic name</li>
</ul></li>
</ul>
<h3 id="two-pass-linkers">3.2 Two Pass Linkers</h3>
<p>链接器linker的任务包括匹配不同可用可重定位模块的externals和entry points，从这个匹配操作推导出需要包含在最终目标代码中的模块列表，并因此调整每个模块中的所有地址以建立一个连贯的可执行目标代码。</p>
<p><img src="/images/OP/085352318.png" /></p>
<p>就像汇编器一样，许多链接器使用两遍：第一遍匹配externals和entry points，通过这样做建立要链接的模块列表，第二遍实际生成目标代码。</p>
<ul>
<li>First pass matches the externals and the entry points of the different available relocatable modules, and establishes the list of modules to be linked.</li>
<li>Second pass generates the object code.</li>
</ul>
<h3 id="dynamic-linking">3.3 Dynamic Linking</h3>
<p>在 Microsoft Office 等大型软件套件中，并非所有用户都使用所有可用功能。 事实上，每个用户只需要可用软件的一小部分。因此，提前链接所有可用功能会浪费时间和内存空间。</p>
<ul>
<li>Link at run-time
<ul>
<li>initial function calls replaced by call to linker</li>
<li>function name passed as parameter to linker</li>
</ul></li>
<li>Example: .ddl files</li>
</ul>
<p>相反，一些函数调用被替换为对链接器的调用，并将函数名称作为参数。这样，函数会在需要使用的那一刻被链接，没有使用的函数不会被链接，不占用内存空间。 这种技术称为“动态链接dynamic linking”。</p>
<blockquote>
<p>The function will be linked when user wants to use it unless it is not activated at program execution.</p>
</blockquote>
<p>查看 Windows 和 Windows 中的系统目录，您会发现 Microsoft 软件实际上是一个巨大的.dll 文件集合，其中dll 代表“动态可链接库dynamically linkable libraries”。</p>
<h2 id="high-level-language">4 High level language</h2>
<p>大多数程序都是用高级语言 (HLL) 编写的，例如 Java、c、FORTRAN 或 Python。 一千多种这样的语言正在使用中。</p>
<p><img src="/images/OP/085352319.png" /></p>
<p>这张幻灯片显示了一个用 HLL 编写的电子锁程序，称为 Modula 2，这是一种针对可读性和一致性进行了优化的语言。 第 2 到 6 行是声明。它们对应于汇编程序中的伪指令，但在这里它们较少针对计算机的技术细节而强调程序逻辑。比如 SC 的声明提醒我们 SC 的值是一个 0 到 999 范围内的整数。 BEGIN 和 END 锁分隔的程序部分对应于汇编程序中的可执行指令，但同样，在一个 这种方式更接近于应用程序程序员的思考方式，而不是计算机指令为获得所需结果而需要安排的方式。</p>
<p>当然，用 HLL 编写的程序需要翻译成目标代码才能执行，但这种翻译比机器代码中汇编程序的翻译复杂几个数量级，因为 HLL 指令之间不再存在一对一的关系 和机器指令。然而，<u>这允许为不同的处理器翻译相同的 HLL 源代码</u>。 相同的应用程序可以翻译为配备英特尔处理器的笔记本电脑或配备 ARM 处理器的智能手机。</p>
<p><img src="/images/OP/085352320.png" /></p>
<p>对 HLL 到机器代码的转换过程的稍微过于简化的描述显示了两种根本不同的处理方式：第一种方式称为<strong>编译compilation</strong>，包括将整个程序从 HLL 转换为目标代码（或可重定位代码）。 第二种方法包括翻译并立即执行源代码的每条语句。 执行这种翻译和后续执行的程序称为<strong>解释器interpreter</strong>。</p>
<h2 id="compiler-vs.-interpreter">5 Compiler VS. Interpreter</h2>
<blockquote>
<p>不同于compilers的逐行翻译，最后生成一个OC，Interpreter是真正贯彻了逐行翻译逐行运行。</p>
<ul>
<li>Lexical Analyser：检查字符的错误</li>
<li>Syntax Analyser：检查语法的错误</li>
</ul>
</blockquote>
<p>Compiler和interpretation的主要优点是什么？</p>
<ul>
<li>Compilation
<ul>
<li>when the program needs to be executed many times, compilation is more efficient.</li>
<li>Error reporting have little information value.</li>
</ul></li>
<li>Interpreter
<ul>
<li>reporting useful information about any incident that occurs during execution.</li>
<li>translating repeatedly many times will waste time.</li>
</ul></li>
</ul>
<p>当同一个程序需要多次执行时，显然compilation和重复执行目标代码的效率更高。然而，在运行时错误的情况下，例如被 0 除，错误报告可能没有什么信息价值，因为在运行时唯一可用的信息是指令的地址和与错误相关的数据。从这些地址中推断出导致错误的指令和变量通常几乎是不可能的任务。</p>
<p>另一方面，Interpreter逐个语句翻译源代码将始终能够报告有关执行期间发生的任何事件的有用数据。另一方面，重复翻译包含在多次执行的循环中的相同语句可能是不可接受的时间浪费。</p>
<p>幸运的是，现代编译器和解释器相互借鉴了技术，以在编译后的目标代码中保留对原始源代码的引用，并临时存储在不久的将来可能再次需要的翻译。粗略地说，可以说interpretation是程序开发的首选，而compilation最适合用稳定的程序处理数据。大多数现代编程环境允许在程序开发期间从interpretation发展到compilation。</p>
<p>Compiler and interpreter have 4 functional parts:</p>
<ol type="1">
<li>lexical analyser</li>
<li>syntax analyzer</li>
<li>code generator</li>
<li>code optimizer</li>
</ol>
<h3 id="compiler">5.1 Compiler</h3>
<p><img src="/images/OP/085352321.png" /></p>
<p>一些编译器还有一个预处理器pre-processor来处理宏。 大多数编译器生成relocatable code，但有些编译器生成assembler code。然后需要通过汇编程序进一步翻译此汇编程序代码。</p>
<p>这两个步骤的翻译在最初作为学生项目开发的编译器中很常见。 为了检查新编译器是否正常工作，读取生成的汇编程序而不是目标代码确实要简单得多。</p>
<h3 id="lexical-analyser">5.2 Lexical analyser</h3>
<p>Recognizes lexical tokens such as</p>
<ul>
<li>Numbers
<ul>
<li>200 , 6.3E23 , .</li>
</ul></li>
<li>Reserved words
<ul>
<li>for ; if :</li>
</ul></li>
<li>Multi-character symbols
<ul>
<li>/*; */; ==; !=;...</li>
</ul></li>
<li>Strings
<ul>
<li>"this is a text"</li>
</ul></li>
<li>Variables
<ul>
<li>ND , CS , KFL...</li>
</ul></li>
</ul>
<p>词法分析器Lexical analyser读取源代码的字符序列并识别特定序列，例如指定格式的十进制数、保留字、多字符符号、文本字符串、变量……</p>
<h3 id="syntax-analyser">5.3 Syntax analyser</h3>
<p><strong>Recognizes</strong> non-terminal symbols such as :</p>
<ul>
<li>a program s</li>
<li>a variable declaration</li>
<li>a function declaration</li>
<li>an expression</li>
</ul>
<p>Can be generated automatically by a parser generator, starting from the BNF syntax definitions</p>
<p><strong>Represents</strong> a program by a syntax tree .</p>
<p>编程语言的语法syntax通常通过称为 BNF（Backus-Naur Formalism）的特定符号来定义。在该表示法notation中，词法分析器识别的项目称为“终结符terminal symbols”，而遵守特定语法规则的一组终结符terminal symbols称为“非终结符non-terminal symbol”。</p>
<h3 id="multi-pass-compiler">5.4 Multi-pass compiler</h3>
<p><img src="/images/OP/085352323.png" /></p>
<p>一些编译器逐步执行翻译，创建多个中间体intermediates。</p>
<h3 id="single-pass-compiler">5.5 Single-pass compiler</h3>
<p><img src="/images/OP/085352322.png" /></p>
<p>一些编译器具有整体monolithic结构。 语法分析器syntax analyser是编译器的核心。 其他函数生成相应的机器码来执行识别的语句。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/01/16/2021-01-16-From-Lowlevel-Machine-CodeTo-Highlevel-Langeuage/">https://yintelligence.tech/2021/01/16/2021-01-16-From-Lowlevel-Machine-CodeTo-Highlevel-Langeuage/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Computer-Systems/">
                                    <span class="chip bg-color">Computer Systems</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/01/17/2021-01-17-Data-representation/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="Data representation">
                        
                        <span class="card-title">Data representation</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            本章主要介绍补码、IEEE754标准。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-01-17
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Computer-Systems/" class="post-category">
                                    Computer Systems
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Computer-Systems/">
                        <span class="chip bg-color">Computer Systems</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/01/15/2021-01-15-Computer-Systems/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="VUB 4004876EER Computer Systems">
                        
                        <span class="card-title">VUB 4004876EER Computer Systems</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-01-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Computer-Systems/" class="post-category">
                                    Computer Systems
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Computer-Systems/">
                        <span class="chip bg-color">Computer Systems</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
