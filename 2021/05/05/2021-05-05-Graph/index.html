<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Graph, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Graph | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Graph</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Algorithms-and-Data-Structures/">
                                <span class="chip bg-color">Algorithms and Data Structures</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Data-model/" class="post-category">
                                Data model
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-05-05
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-08-05
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    4.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    24 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="graph">Graph</h1>
<p><a href="file:///C:/Users/heart/Desktop/Algorithms%20and%20Data%20Structures/Algo_Data_Slideset%20(1).pdf">Slide 188 ~ 227</a></p>
<p>Graph由一组node和node之间的连接组成，如图所示。</p>
<figure>
<img src="/images/CS61B/0938080.png" alt="" /><figcaption>A directed acyclic weighted graph</figcaption>
</figure>
<p>例如，graph可用于表示地图：每个城市都是一个node，连接城市的道路是edge。</p>
<p>使用graph术语，node被称为<strong>顶点vertices</strong>（单个是vertex）。</p>
<p><strong>Vertices</strong>之间的连接称为<strong>边edge</strong>。 <strong>Edge</strong>可以有一个<strong><em>权重weight</em></strong>，例如表示图中城市之间的距离，或其他一些概念。 带weight的图是<strong>加权图weighted graph</strong>，其他图是未加权的图<strong>unweighted graphs</strong>。</p>
<p>因此，graph <code>G = (V, E)</code> 完全由vertices集 V 和edges集 E 定义。 对于加权图，还有一个权重函数 w : E → R，所以 <code>w(u, v)</code> 是边 <code>(u, v) ∈ E</code> 的权重。</p>
<p>在上图中，每条edge都有一个箭头，即边有一个方向。 所有边都有一个方向的图称为<strong>有向图directed graph</strong>，没有方向的图是<strong>无向图undirected graph</strong>。</p>
<p>例如，在大多数地图中，A 和 B 之间的距离与 B 和 A 之间的<u>距离相同</u>。而不是用两条边（从 A 到 B 和从 B 到 A）来表示，而是使用单个undirected edge。</p>
<p>两个vertices i 和 j 相邻，如果它们通过edge <code>(i, j)</code> 连接并且edge <code>(i, j)</code> 被称为入射在vertices i 和 j 上。</p>
<p>例如，在图中，顶点 A 和 C 相邻，而 A 和 D 不相邻。Undirected graph中顶点的<strong>度数degree</strong>是入射在其上的edge数。 在directed graph中，out-degree是离开它的edge数，in-degree是进入它的边数。 因此，directed graph中顶点vertex的degree是其in-degree和out-degree之和。</p>
<p><strong>Path</strong>是一系列相邻的顶点vertices。 例如，在图中，从 A 到 D 有几条path（例如 ABD、ACD 和 ABCD），但没有从 D 到 A 的path。如果从每个vertex到每个其他vertex都有一条path，则graph已连接。</p>
<figure>
<img src="/images/CS61B/0938081.png" alt="" /><figcaption>A directed cyclic weighted graph</figcaption>
</figure>
<p>任何从给定node开始并终止于同一node的path称为<strong>循环cycle</strong>。 至少有一个cycle的graph是cyclic的，而所有其他graph都是acyclic的。 图中所示的图是一个cyclic graph，因为有一条路径 ABCA。</p>
<p><strong>没有循环的有向图通常称为有向无环图directed acyclic graphs或 DAG。</strong></p>
<p>Graph的子集称为<strong>子图subgraph</strong>。 如果 V‘ ⊆ V 且 E’ ⊆ E，则图 <code>G‘ = (V’, E‘)</code> 是 <code>G = (V, E)</code> 的子图。 例如，图中的graph是图中的graph的子图。</p>
<figure>
<img src="/images/CS61B/0938082.png" alt="" /><figcaption>A subgraph of a directed acyclic weighted graph is again a directed acyclic weighted graph</figcaption>
</figure>
<h2 id="terminology">Terminology</h2>
<ul>
<li>Vertex （vertices） : node</li>
<li>Edge: connection between two vertices.</li>
<li>Edges can have a weight: weighted graphs and unweighted graphs</li>
<li>So any graph <code>G= (V,E)</code> is fully defined by the sets V of vertices and E of edges</li>
<li>For weighted graphs, there is also a weight function <code>w:E→R</code>, so <code>w(u,v)</code> is the weight of the edge <code>(u,v) ∈ E</code>.</li>
<li>Edges can have a direction （marked by the arrow）. Directed and undirected graphs.</li>
<li>Two vertices i and j are adjacent if they are connected by an edge <code>(i,j)</code>.</li>
<li>The edge <code>(i,j)</code> is said to be incident on the vertices i and j.</li>
<li>The degree of a vertex in an undirected graph is the number of edges incident on it.</li>
<li>In a directed graph, the out-degree is the number of edges leaving it,the in-degree is the number of edges entering it. The degree of a vertex in a directed graph is hence the sum of its in-degree and its out-degree.</li>
<li>A path is a sequence of adjacent vertices.</li>
<li>If there is a path from every vertex to every other vertex, the graph is connected.</li>
<li>Any path starting from a given node that terminates in the same node, is called a cycle. Cyclic and Acyclic graphs.</li>
<li>Directed graphs without cycles are often referred to as directed acyclic graphs or DAG.</li>
<li>A subset of a graph is called a subgraph. The graph <code>G′= (V′,E′)</code> is a subgraph of <code>G= (V,E)</code> if <code>V′⊆V</code> and <code>E′⊆E</code>.</li>
</ul>
<h2 id="the-adjacency-matrix-representation">The adjacency matrix representation</h2>
<p><strong>邻接矩阵adjacency matrix</strong>是表示graph的一种非常简单的方式。 在这里的解释中，我们将专注于表示有向加权图directed weighted graphs，但该表示可以很容易地适应undirected or unweighted graphs。</p>
<p>这个想法很简单：如果一个graph有 N 个节点，那么我们用一个 N × N 方阵square matrix来表示它。 我们决定graph的一些编号。</p>
<p>例如，在第一张图中，我们决定将节点 A 标记为 0，B 标记为 1，... 这样，我们可以存储节点 A 和节点 B 之间的边的权重（即 6），把它存储在第 0 行（因为节点 A 位于位置 0）和第 1 列（因为节点 B 位于位置 1）的matrix中。 <strong>边edge的起点是行row位置，终点是列column位置</strong>。</p>
<p>因此，如果某些graph <code>G = (V, E)</code> 的顶点以某种方式编号为 1, 2, ..., |V|，则邻接 matrix表示是大小为 |V| 的矩阵 A = （a<sub>ij</sub>） 由 |V|，此处： <span class="math display">\[
a_{ij}=\left\{
\begin{aligned}
w(i,j) &amp; &amp; if\ (i,j)\ ∈ E \\
0 &amp; &amp; Otherwise
\end{aligned}
\right.
\]</span> <img src="/images/CS61B/0938084.png" /></p>
<p><strong>当没有边连接节点 i 和 j 时，我们实际上应该在矩阵中的位置a<sub>ij</sub>中放入什么数字？</strong></p>
<p>这在一定程度上取决于应用程序：如果图中的权重表示概念之间的关联强度，那么假设关联强度为零是合乎逻辑的，对应于没有关联的事实。 因此，在这种情况下，权重为零是合适的，以表示不存在边缘。</p>
<p>但是，如果权重表示地图中的距离，则权重为零实际上意味着两个节点之间的距离为零。 所以，为了表示两个节点之间没有连接，在这种情况下最好使用一个非常大的数字。 在我们在这里开发的矩阵表示中，我们将使用<strong>零权重weight of zero</strong>来表示两个节点没有连接的事实，如第一张图所示。</p>
<figure>
<img src="/images/CS61B/0938083.png" alt="" /><figcaption>Any graph can easily be represented by a matrix</figcaption>
</figure>
<h3 id="the-matrix-class">The matrix class</h3>
<p><strong>Matrix</strong>类简单地表示一个 N × N 方阵。 它支持构造函数constructor（将所有元素初始化为0）、在矩阵中的特定（行、列）处设置值的方法和在指定（行、列）处检索值的 get 方法。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Matrix</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// some appropriate private members .</span>
    <span class="token keyword">public</span> <span class="token class-name">Matrix</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> nrNodes <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">// allocate an N-by -N matrix where N = nrNodes</span>
        <span class="token comment">// all elements are initially 0</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> set <span class="token punctuation">(</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> weight<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">// store the weight at the given row and column .</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token class-name">Comparable</span> get <span class="token punctuation">(</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">// return the weight at the given row and column .</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="the-graph-class">The graph class</h3>
<p>如果定义的<strong>Matrix</strong>类可用，那么基于minimalistic adjacency matrix的graph类很容易实现：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MatrixGraph</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Matrix</span> data<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">MatrixGraph</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> nrNodes <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Matrix</span> <span class="token punctuation">(</span> nrNodes <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> addEdge <span class="token punctuation">(</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token keyword">double</span> w <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        data<span class="token punctuation">.</span>set <span class="token punctuation">(</span> from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> w <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">double</span> getEdge <span class="token punctuation">(</span> <span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">to</span> <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">)</span> data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> from<span class="token punctuation">,</span> <span class="token keyword">to</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="the-adjacency-list-representation">The adjacency list representation</h2>
<p>Adjacency list表示基于这样一种思想，即所有节点都应明确存储在某些数据结构中，以允许轻松遍历所有节点。</p>
<p>在我们将在这里开发的初始表示中，节点将存储在向量中，但存在许多其他可能性。</p>
<p>在第二张图中，左侧部分显示了节点集，包含节点 A、B、C 和 D。现在对于每个节点，保留一个单独的结构（邻接列表adjacency list或边列表edge list），它存储从当前节点开始的所有边。 因此，节点 A 的邻接表包含边 AB、AC、AD。 在第二张图中，adjacency list中只显示了节点的目的地。</p>
<p><img src="/images/CS61B/0938085.png" /></p>
<h3 id="the-graph-class-1">The graph class</h3>
<p>在 JAVA 代码中表示这个结构需要更多的努力：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Graph</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token class-name">Comparable</span> info <span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">Vector</span> edges <span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Node</span> <span class="token punctuation">(</span> <span class="token class-name">Comparable</span> label <span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            info <span class="token operator">=</span> label <span class="token punctuation">;</span>
            edges <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> addEdge <span class="token punctuation">(</span> <span class="token class-name">Edge</span> e <span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            edges<span class="token punctuation">.</span>addLast <span class="token punctuation">(</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token keyword">public</span> <span class="token keyword">int</span> compareTo <span class="token punctuation">(</span> <span class="token class-name">Object</span> o <span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token comment">// two nodes are equal if they have the same label</span>
            <span class="token class-name">Node</span> n <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token class-name">Node</span> <span class="token punctuation">)</span> o <span class="token punctuation">;</span>
            <span class="token keyword">return</span> n<span class="token punctuation">.</span>info<span class="token punctuation">.</span>compareTo <span class="token punctuation">(</span> info <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">public</span> <span class="token class-name">Comparable</span> getLabel <span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> info <span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Edge</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token class-name">Node</span> toNode <span class="token punctuation">;</span>
        
        <span class="token keyword">public</span> <span class="token class-name">Edge</span> <span class="token punctuation">(</span> <span class="token class-name">Node</span> <span class="token keyword">to</span> <span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            toNode <span class="token operator">=</span> <span class="token keyword">to</span> <span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> compareTo <span class="token punctuation">(</span> <span class="token class-name">Object</span> o <span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token comment">// two edges are equal if they point</span>
            <span class="token comment">// to the same node .</span>
            <span class="token comment">// this assumes that the edges are</span>
            <span class="token comment">// starting from the same node !!!</span>
            <span class="token class-name">Edge</span> n <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token class-name">Edge</span> <span class="token punctuation">)</span> o <span class="token punctuation">;</span>
            <span class="token keyword">return</span> n <span class="token punctuation">.</span> toNode <span class="token punctuation">.</span> compareTo <span class="token punctuation">(</span> toNode <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Vector</span> nodes <span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Graph</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        nodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> addNode <span class="token punctuation">(</span> <span class="token class-name">Comparable</span> label <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        nodes<span class="token punctuation">.</span>addLast <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span> <span class="token punctuation">(</span> label <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token class-name">Node</span> findNode <span class="token punctuation">(</span> <span class="token class-name">Comparable</span> nodeLabel <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">Node</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token class-name">Node</span> n <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token class-name">Node</span> <span class="token punctuation">)</span> nodes<span class="token punctuation">.</span>get <span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> n<span class="token punctuation">.</span>getLabel <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nodeLabel <span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                res <span class="token operator">=</span> n <span class="token punctuation">;</span>
                <span class="token keyword">break</span> <span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> res <span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> addEdge <span class="token punctuation">(</span> <span class="token class-name">Comparable</span> nodeLabel1<span class="token punctuation">,</span>
<span class="token class-name">Comparable</span> nodeLabel2 <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">Node</span> n1 <span class="token operator">=</span> findNode <span class="token punctuation">(</span> nodeLabel1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Node</span> n2 <span class="token operator">=</span> findNode <span class="token punctuation">(</span> nodeLabel2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
        n1<span class="token punctuation">.</span>addEdge <span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span> <span class="token punctuation">(</span> n2 <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token comment">// Remember</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> contains <span class="token punctuation">(</span> <span class="token keyword">int</span>  obj <span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> obj <span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="graph-algorithms">Graph Algorithms</h2>
<h3 id="breadth-first-traversal-of-a-directed-acyclic-graph">Breadth first traversal of a directed acyclic graph</h3>
<h4 id="finding-a-path">Finding a path</h4>
<p>这里使用简单的<strong>深度优先搜索breadth first search</strong>/<strong>广度优先搜索depth first search</strong>来验证path是否存在。 这种方法假设我们有一个有向无环图directed acyclic graph； 在这种情况下，可以调整遍历树的代码：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> findPath <span class="token punctuation">(</span> <span class="token class-name">Comparable</span> nodeLabel1 <span class="token punctuation">,</span>
<span class="token class-name">Comparable</span> nodeLabel2 <span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token class-name">Node</span> startState <span class="token operator">=</span> findNode <span class="token punctuation">(</span> nodeLabel1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Node</span> endState <span class="token operator">=</span> findNode <span class="token punctuation">(</span> nodeLabel2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Stack</span> toDoList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDoList<span class="token punctuation">.</span>push <span class="token punctuation">(</span> startState <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span> toDoList<span class="token punctuation">.</span>empty <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">Node</span> current <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token class-name">Node</span> <span class="token punctuation">)</span> toDoList<span class="token punctuation">.</span>pop <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> current <span class="token operator">==</span> endState <span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">&#123;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>edges<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                <span class="token class-name">Edge</span> e <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token class-name">Edge</span> <span class="token punctuation">)</span> current<span class="token punctuation">.</span>edges<span class="token punctuation">.</span>get <span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
                toDoList<span class="token punctuation">.</span>push <span class="token punctuation">(</span> e<span class="token punctuation">.</span>toNode <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="depth-first-graph">Depth First Graph</h3>
<h4 id="depth-first-search">Depth first search</h4>
<ul>
<li><p>The DFS does not have a visited list.</p>
<p>DFS 没有访问列表。</p></li>
<li><p>Just as in the tree search, it can easily be added, but it is time consuming to check the visited list at each step.</p>
<p>就像在树搜索中一样，它可以很容易地添加，但在每一步检查访问列表是很耗时的。</p></li>
<li><p>Keep a boolean in each node to mark whether it was visited before or not.</p>
<p>在每个节点中保留一个布尔值来标记它之前是否被访问过。</p></li>
<li><p>Recursive version 递归版本</p></li>
</ul>
<h4 id="depth-first-graph-traversal">Depth First Graph Traversal</h4>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">DFS</span><span class="token punctuation">(</span> <span class="token class-name">Node</span>  current <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    current<span class="token punctuation">.</span>visited <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>edge<span class="token punctuation">,</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Edge</span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Edge</span><span class="token punctuation">)</span> current<span class="token punctuation">.</span>deges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Node</span> next <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">)</span>e<span class="token punctuation">.</span>toNode<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>next<span class="token punctuation">.</span>visited<span class="token punctuation">)</span> <span class="token function">DFS</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
    
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">DFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Node</span> current <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">)</span> nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        current<span class="token punctuation">.</span>visited <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Node</span> current <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token punctuation">)</span> nodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">.</span>visited<span class="token punctuation">)</span> <span class="token function">DFS</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="time-complexity-of-dfs">Time Complexity of DFS</h4>
<ul>
<li><p>Set all Nodes to unvisited 将所有节点设置为未访问: <code>O(|V|)</code></p></li>
<li><p>How many calls to DFS are there?</p>
<p>有多少次调用 DFS？</p></li>
<li><p>For each node, if it is not visited yet, then visit it.</p>
<p>对于每个节点，如果它还没有被访问，则访问它。</p>
<ul>
<li><p>For each edge in the adjacency list, if not visited yet, visit the destination of the edge.</p>
<p>对于邻接表中的每条边，如果还没有访问过，则访问该边的目的地。</p></li>
</ul></li>
<li><p>So, the number of DFS calls is the sum of all nr of nodes in the adjacency lists of all the nodes.</p>
<p>因此，DFS 调用的次数是所有节点的邻接列表中所有节点的总和。</p></li>
<li><p><span class="math display">\[
\sum_{v∈V}|adj(v)|=O(|E|)
\]</span></p></li>
<li><p>Time complexity of a full depth first traversal is <code>O(|V|+|E|)</code>.</p></li>
</ul>
<h4 id="topological-sorting">Topological Sorting</h4>
<p>A topological sort 拓扑排序 of a dag <code>G=(V,E)</code> is a linear ordering of all its vertices such that if G contains an edge <code>(u,v)</code>, then u appears before v in the ordering.</p>
<p>dag <code>G=(V,E)</code> 的拓扑排序是其所有顶点的线性排序，这样如果 G 包含边 <code>(u,v)</code>，则 u 在排序中出现在 v 之前。</p>
<p>DFS exactly gives this ordering （see how they are printed）!</p>
<p>DFS 正是给出了这个顺序（看看它们是如何打印的）！</p>
<h4 id="cycle-checking">Cycle checking</h4>
<ul>
<li><p>If there is a cycle, there does not exist a topological sorting.</p>
<p>如果有环，则不存在拓扑排序。</p></li>
<li><p>So, cycle checking in <code>O(|V|+|E|)</code>.</p>
<p>所以，循环检查<code>O(|V|+|E|)</code>。</p></li>
</ul>
<p>Back edges are those edges <code>(u,v)</code> connecting a vertex u to an ancestor v in a depth-first tree. We consider self-loops, which may occur in directed graphs, to be back edges.</p>
<p>Back edges是那些在深度优先树中将顶点 u 连接到祖先 v 的边 <code>(u,v)</code>。 我们认为可能出现在directed graph中的自环是back edge。</p>
<h4 id="towards-cycle-checking-in-adjacency-matrix-notation">Towards cycle checking in adjacency matrix notation</h4>
<ul>
<li><p>In an acyclic graph with n vertices, there can be at most n edges.</p>
<p>在具有 n 个顶点的无环图中，最多可以有 n 个边。</p></li>
<li><p>In an acyclic graph with n vertices, the longest path can contain at most n - 1 edges.</p>
<p>在具有 n 个顶点的无环图中，最长路径最多可以包含 n - 1 条边。</p></li>
<li><p>Let A be the adjacency representation of G.</p>
<p>设 A 为 G 的邻接表示。</p>
<ul>
<li><p>If trace（A） &gt; 0, then there is at least one self loop. （i.e. a cycle of length 1）</p>
<p>如果trace（A）&gt;0，则至少有一个自循环。 （l例如： 一个周期长度为 1）</p></li>
<li><p>If trace（A*A）&gt;0, then there is at least one cycle of length 2.</p>
<p>如果trace（A*A）&gt;0，则至少有一个长度为2的循环。</p></li>
<li><p>If trace（A<sup>n</sup>）&gt;0, then there is at least one cycle of length n.</p>
<p>如果trace（A<sup>n</sup>）&gt;0，则至少有一个长度为n的循环。</p></li>
</ul></li>
<li><p>Consequently, a graph with n nodes has no cycles if for all k smaller than n, trace（A<sup>k</sup>） = 0.</p>
<p>因此，如果对于所有小于 n 的 k，trace（A<sup>k</sup>） = 0，则具有 n 个节点的图没有环。</p></li>
</ul>
<p>Why is that?</p>
<ul>
<li><p>Consider C = A × B, then <span class="math display">\[
c_{ij}=\sum^{n}_{k=1}a_{ij}b_{kj}
\]</span></p></li>
<li><p>So in A<sup>2</sup> <span class="math display">\[
a_{ij}=\sum^{n}_{k=1}a_{ik}a_{kj}
\]</span></p></li>
<li><p>a<sub>ij</sub>0 in A<sup>2</sup> if there is a node k such that there is an edge <code>(i,k)</code> and an edge <code>(k,j)</code></p></li>
<li><p>（which is a path of length 2）.</p></li>
<li><p>So, in A<sup>2</sup>, an element on the diagonal is larger than zero if there is an element with a path of length two to itself.</p></li>
</ul>
<h3 id="shortest-path-algorithms">Shortest path algorithms</h3>
<ul>
<li><p>We are looking for the path with the smallest total weight.</p>
<p>我们正在寻找总weight最小的路径。</p></li>
<li><p>We are assuming there is no heuristic available （otherwise A<sup>*</sup>）.</p>
<p>我们假设没有可用的启发式方法（否则 A<sup>*</sup>）。</p></li>
<li><p>We focus on algorithms for finding Single-Source shortest paths, i.e. algorithms that find the shortest path to all reachable nodes from a given node.</p>
<p>我们专注于寻找单源最短路径的算法，即找到从给定节点到所有可达节点的最短路径的算法。</p></li>
</ul>
<p><strong>Subpaths of a shortest path are also shortest paths</strong></p>
<p>Let p = v<sub>0</sub>...v<sub>k</sub> be the shortest path from v<sub>0</sub> to v<sub>k</sub> and let p<sub>ij</sub> = v<sub>i</sub>...v<sub>j</sub> with 0≤i≤j≤k be the subpath from v<sub>i</sub> to v<sub>j</sub>, then p<sub>ij</sub> is the shortest path from v<sub>i</sub> to v<sub>j</sub>.</p>
<p><strong>A shortest path cannot have cycles.</strong></p>
<h3 id="relaxation-based-algorithms">Relaxation Based Algorithms</h3>
<p>Many shortest path algorithms are based on a relaxation principle:</p>
<ul>
<li><p>To each vertex v∈V a number v.d is associated, representing the current estimated distance from the source vertex s to the current vertex v.</p>
<p>每个顶点 v∈V 一个数字 v.d 相关联，表示从源顶点 s 到当前顶点 v 的当前估计距离。</p></li>
<li><p>For all nodes v∈V, v.d=∞, except for s.d= 0.</p>
<p>对于所有节点 v∈V，v.d=∞，除了 s.d=0。</p></li>
<li><p>The process of relaxing an edge <code>(u,v)</code> consists of testing whether we can improve the shortest path to v found so far by going through u and, if so, updating v.d.</p>
<p>放松边<code>(u,v)</code>的过程包括测试我们是否可以通过经过u来改进目前找到的到v的最短路径，如果可以，则更新v.d。</p></li>
</ul>
<p><img src="/images/CS61B/0938086.png" /></p>
<h3 id="the-bellman-ford-algorithm">The Bellman-Ford Algorithm</h3>
<pre class="line-numbers language-none"><code class="language-none">BELLMAN-FORD(G, w, s)
	INITIALIZE-SINGLE-SOURCE(G, s)
	for i&#x3D;1 to |G:V| - 1
		for each edge (u,v) ∈ G.E
			RELAX(u, v, w)
	for each edge (u, v) ∈ G.E
		if v.d &gt; u.d + w(u,v)
			return FALSE
	return TRUE<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>The path relaxation property</strong></p>
<p>If p=v<sub>0</sub>...v<sub>k</sub> is a shortest path from s = v<sub>0</sub> to v<sub>k</sub>, and we relax the edges of p in the order （v<sub>0</sub>,v<sub>1</sub>）,（v<sub>1</sub>,v<sub>2</sub>）,...,（v<sub>k-1</sub>,v<sub>k</sub>）, then v<sub>k</sub>.d=δ（s,v<sub>k</sub>）（δ（s,v<sub>k</sub>）is the weight of the shortest path from s to v<sub>k</sub>）.</p>
<p>如果 p=v<sub>0</sub>...v<sub>k</sub> 是从 s = v<sub>0</sub> 到 v<sub>k</sub> 的最短路径 ，我们按照（v<sub>0</sub>,v<sub>1</sub>）,（v<sub>1</sub>,v<sub>2</sub>）,...,（v<sub>k-1</sub>,v<sub>k</sub>），那么 v<sub>k</sub>.d=δ（s, v<sub>k</sub>）（δ（s,v<sub>k</sub>）是从s到v<sub>k</sub>的最短路径的权重）。</p>
<p>Let <code>G=(V,E)</code> be a weighted, directed graph with sources and weight function <code>w:E→R</code>, and assume that G contains no （negative-weight） cycles that are reachable from s. Then, after the <code>|V|−1</code> iterations of the for loop of lines 24 of BELLMAN-FORD, we have <code>v.d=δ(s,v)</code> for all vertices v that are reachable from s.</p>
<p>令<code>G=(V,E)</code>是一个带有源和权重函数<code>w:E→R</code>的加权有向图，并假设G不包含从s可达的（负权）循环。 然后，在 BELLMAN-FORD 的第 24 行 for 循环的 <code>|V|−1</code> 迭代之后，对于从 s 可到达的所有顶点 v，我们有 <code>v.d=δ(s,v)</code>。</p>
<p><strong>Proof.</strong></p>
<p>Consider any vertex v that is reachable from s, and let p=v<sub>0</sub>...v<sub>k</sub>, where v<sub>0</sub>=s and v<sub>k</sub>=v, be any shortest path from s to v. Because shortest paths are simple,p has at most <code>|V|−1</code> edges, and so <code>k≤|V|−1</code>.</p>
<p>考虑从 s 可达的任何顶点 v，让 p=v<sub>0</sub>...v<sub>k</sub>，其中 v<sub>0</sub>=s 和 v <sub>k</sub>=v，是从 s 到 v 的任何最短路径。因为最短路径很简单，p 最多有 <code>|V|−1</code> 边，所以 <code>k≤|V|−1</code> .</p>
<p>Each of the <code>|V|−1</code> iterations of the for loop of lines 24 relaxes all <code>|E|</code> edges. Among the edges relaxed in the i-th iteration, for i= 1,...,k is （v<sub>i-1</sub>,v<sub>i</sub>）. By the path relaxation property, therefore, v.d = v<sub>k</sub>.d = δ（s,v<sub>k</sub>） = δ（s,v）.</p>
<p>第 24 行的 for 循环的每次 <code>|V|−1</code> 迭代都会松弛所有 <code>|E|</code> 边。 在第 i 次迭代中松弛的边中，对于 i= 1,...,k 是（v<sub>i-1</sub>,v<sub>i</sub>）。 由路径松弛性质，因此，v.d = v<sub>k</sub>.d = δ（s,v<sub>k</sub>） = δ（s,v）。</p>
<ul>
<li><p>This is a straight forward approach that runs in <code>O(VE)</code>.</p>
<p>这是运行在“O(VE)”中的直接方法。</p></li>
<li><p>The longest path （without cycle） has <code>|V|−1</code> edges.</p>
<p>最长路径（无环）有<code>|V|−1</code>边。</p></li>
<li><p>It repeats <code>|V|−1</code> times a relaxation on all edges.</p>
<p>它在所有边上重复 <code>|V|−1</code> 次松弛。</p></li>
<li><p>At each step i, at least the edge （v<sub>i-1</sub>,v<sub>i</sub>） is relaxed.</p>
<p>在每一步i，至少边缘（v<sub>i-1</sub>,v<sub>i</sub>）是松弛的。</p></li>
<li><p>（So, if we could traverse the nodes in ”the right order”, we would need far less passes.）</p>
<p>（所以，如果我们能以“正确的顺序”遍历节点，我们将需要的次数少得多。）</p></li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">DAG-SHORTEST-PATHS(G, w, s)
	topologically sort the vertices of G
	INITIALIZE-SINGLE-SOURCE(G, s)
	for each vertex u, taken in topologically sorted order
		for each vertex v ∈ G.Adj[u]
			RELAX (u, v, w)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="exercises">Exercises</h1>
<p>1. Give a proof for the so-called handshaking lemma: If <code>G = (V, E)</code> is an undirected graph, then <span class="math display">\[
\sum_{v∈V}degree(v)=2|E|
\]</span> 2. （adjacency matrix representation） Complete the implementation of the matrix class defined in section 12.1.1. The methods get and set should run in constant time. Use data structures developed in this course as a starting point.</p>
<p>3. （adjacency matrix representation）Add a <code>toString</code> method and a print method to the graph which outputs all the nodes and all edges.</p>
<p>4. （adjacency list representation） Add a <code>toString</code> method and a print method to the graph which outputs all the nodes and all edges.</p>
<p>5. （adjacency list representation） In the current implementation, edges do not contain any information. Extend the edge class such that you can specify a weight with every edge. Change the <code>addEdge</code> method to add this weight. Change print methods to print the weight as well.</p>
<p>6. （adjacency list representation）The method verifies whether a path between two given nodes exists. Extend this method to return the actual path, represented as a list of nodes.</p>
<p>7. （adjacency list representation）Also test the <code>findPath</code> method on a graph that contains cycles. Why does it not work?</p>
<p>8. （adjacency list representation）One strategy to avoid problems with cycles in the <code>findPath</code> method is to keep a list of visited nodes in the <code>findPath</code> method: whenever a node is popped from the to-do list, it is added to the visited list. Whenever a node is already visited （is in the visited list）, it is not added to the to-do list anymore. Implement this strategy.</p>
<p>9. （adjacency list representation）The approach developed in the previous question to avoid problems with cycles is rather slow due to the search time in the linked list. A method which is often faster is the following: in the nodes of the graph, add an extra variable named “visited” (a boolean) in which we store whether this particular node was visited before yes or no. Before we can start searching for a path, we first set this boolean in all nodes to false. During the search for a path, we check whether the node was already visited before simply by checking this boolean. Change the node class such that we can check whether a given node was already visited or not. Also add a method to change the visited status of the node to a given value. Add a method to the graph class which sets the visited status of each node to false. Change the <code>findPath</code> method of the graph class such that it does not get stuck in cycles anymore, by checking whether each node was visited before.</p>
<p>10.（adjacency list representation）The <code>findNode</code> method is rather long code as it needs a for loop and some logic to loop over all nodes and check them. Better would be that the <code>findNode</code> method on the graph, calls the find method on the underlying data structure, in this case the vector. Change the <code>findNode</code> on the graph to simply call the find method of the vector.</p>
<p>11.（adjacency list representation）The adjacency list representation developed so far uses vectors to store nodes and edges. Replace the type of both variables to Linked List. Does everything still works? if not, correct and/or complete the implementation of the linked list.</p>
<p>12.（adjacency list representation）The adjacency list representation developed so far uses vectors to store the nodes. As a result the <code>findNode</code> method has time complexity O(n). This is an important drawback, as this method is called very often. For instance, the <code>addEdge</code> method does two calls to the <code>findNode</code> method. Change the implementation of the Graph class, such that the time complexity of the <code>findNode</code> method is reduced to <code>O(logN)</code>.</p>
<p>13. （general） Any binary tree can be represented by a graph. Extend the graph class with a method which traverses the entire tree and adds all connections in the tree to a graph.</p>
<p>14. （general） Can the graph constructed in question 13 be cyclic? Why （not）?</p>
<p>15. （general）Explain how the edge-list representation can be adapted to represent undirected graphs. Explain how the matrix representation can be adapted to represent undirected graphs.</p>
<p>16. （general） Explain the differences in memory usage for representing directed graphs in the matrix representation and the edge-list representation.</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/05/05/2021-05-05-Graph/">https://yintelligence.tech/2021/05/05/2021-05-05-Graph/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Algorithms-and-Data-Structures/">
                                    <span class="chip bg-color">Algorithms and Data Structures</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/05/06/2021-05-06-XML-and-Related-Technologies/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="XML and Related Technologies">
                        
                        <span class="card-title">XML and Related Technologies</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-05-06
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Network/" class="post-category">
                                    Network
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Web-Technologies/">
                        <span class="chip bg-color">Web Technologies</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/05/04/2021-05-04-HTML5-and-JavaScript/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="HTML5 and JavaScript">
                        
                        <span class="card-title">HTML5 and JavaScript</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Exercise 6
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-05-04
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Network/" class="post-category">
                                    Network
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Web-Technologies/">
                        <span class="chip bg-color">Web Technologies</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
