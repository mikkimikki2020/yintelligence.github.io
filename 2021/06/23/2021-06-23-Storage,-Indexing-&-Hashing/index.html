<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Storage, Indexing &amp; Hashing, Chaoqun Yin">
    <meta name="description" content="Veni, Vidi, Vici">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Storage, Indexing &amp; Hashing | Chaoqun Yin</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Chaoqun Yin</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Chaoqun Yin</div>
        <div class="logo-desc">
            
            Veni, Vidi, Vici
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/15.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Storage, Indexing &amp; Hashing</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Databases/">
                                <span class="chip bg-color">Databases</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Database/" class="post-category">
                                Database
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-06-23
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-08-21
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    2.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    15 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="storage-indexing-hashing">Storage, Indexing &amp; Hashing</h1>
<p><a href="https://yintelligence.tech/2021/02/12/2021-02-12-overview/">VUB 4019814ENR Databases</a></p>
<p><a href="https://yintelligence.tech/2021/03/31/2021-03-30-Storage-Management/">Background</a> + <a target="_blank" rel="noopener" href="https://recordings.reu1.blindsidenetworks.com/vub/ff87da1afee49231ef96e795ff411bf090e04726-1619177300777/capture/">Video</a> + <a target="_blank" rel="noopener" href="https://canvas.vub.be/courses/17910/files/folder/WPO?preview=846800">Question</a> + <a target="_blank" rel="noopener" href="https://canvas.vub.be/courses/17910/files/folder/WPO?preview=839517">Solution</a></p>
<h2 id="storage-management-raid">Storage Management (RAID)</h2>
<h3 id="exercise-1">Exercise 1</h3>
<p>Imagine that you have a moderate amount of data that you do not want to lose. We know that we write a lot of data that we do not read often. Additionally, when a hard disk fails, we do not want to lose our data.</p>
<p>Which RAID level is optimal for this scenario? What are the criteria for choosing a RAID level? Use one of the following sources as a starting point:</p>
<p><strong>Solution</strong></p>
<ul>
<li>RAID 0: Performance through striping, but no data safety. If one disk is lost we lose all our data (we cannot do anything with only half of the blocks).</li>
<li>RAID 1: Data duplication (mirroring) but only has the same performance as a single disk.</li>
<li>RAID 2: Requires special hardware. Bit-level ECC is computationally expensive. Is not used in practise.</li>
<li>RAID 3: An improved version of RAID 2. Also not really used in practice since there are other RAID levels that provide the same characteristics more efficiently.</li>
<li>RAID 4: All parity blocks are on the same disk and form a bottleneck. For instance, if we update a random block on disk A and one on disk B this will happen in parallel but two parity blocks will need to be recalculated and written to the same parity disk. In other words, the benefit of distributing operations across disks is partly lost because in some situations the speed of the whole array is limited to the speed of the parity disk.</li>
<li>RAID 5: RAID 4, but the parity blocks are spread across all disks.</li>
<li>RAID 6: RAID 5 but with 2 parity blocks per row of data blocks. This means that we can lose two disks and still recover the missing information. Given that this high level of safety requires quite some extra storage space, RAID 6 is most useful for arrays with a lot of disks.</li>
</ul>
<p>For the proposed scenario, RAID 0 is not an option because the data is not safe. RAID 1 is a candidate since it offers safety. RAID 2 is not really used in practice. RAID 3 is also quite rare and is surpassed by higher RAID levels. When comparing RAID 4 and 5 we see that RAID 5 is an improved version of RAID 4so we don’t consider RAID 4. RAID 5 is a candidate since it offers both performance and safety. Given that we only want to work with a moderate amount of data RAID 6 would be overkill. Our main candidates are RAID 1 and RAID 5. The choice is debatable, but given that we do not require large amounts of storage space perhaps RAID 1 would be the better choice for this scenario.</p>
<h3 id="exercise-2">Exercise 2</h3>
<p>Calculate the missing data for the following scenarios. Use the XOR (exclusive OR) operator for calculating parity.</p>
<p><img src="/images/DB/image-20210821115148231.png" /></p>
<p><strong>Solution</strong></p>
<p>The parity block is a block of extra information that we can compute from a number of data blocks. Based on this parity block we can later reconstruct a data block if one goes missing. If we have for instance data blocks B1, B2, B3 and their parity block P1, the RAID system will spread them across different disks so that only one block is lost if any of the disks stops working. In the case that we lose the parity block we can also just recompute it. To calculate parity we will make use of the XOR operator. Note: (A XOR B) XOR C =A XOR (B XOR C).</p>
<p>For the first situation we take the first column of bits from the data blocks and get 1, 1 and 0. We will XOR these together, the order does not matter:</p>
<p>(1 XOR 1) XOR 0 = 0 XOR 0 = 0</p>
<p>or:</p>
<p>1 XOR (1 XOR 0) = 1 XOR 1 = 0</p>
<p>So the first question mark is a 0. We repeat this for the other columns and get:</p>
<p><img src="/images/DB/image-20210821115904964.png" /></p>
<p>One can see a pattern in the parity block. If the amount of 1s in the column is odd then there will be a 1 in the parity block. If the amount is even there will be a 0. In other words, parity tells us if the amount of 1sis even or odd so if a value is missing we know if it should be a 1 or a 0.</p>
<h3 id="exercise-3">Exercise 3</h3>
<p>Imagine a RAID 5 setup with 4 hard disks. The table below shows us how the data block (Bi) and parity blocks (Pi) are spread across the disks.</p>
<p>Pi is the parity block for data blocks B4i−3 to B4i. For instance,P1 is the parity block for data blocks B1 (4∗1−3 = 1) to B4 (4∗1 = 4). Is the distribution proposed in the table valid?</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Disk 1</th>
<th style="text-align: center;">Disk 2</th>
<th style="text-align: center;">Disk 3</th>
<th style="text-align: center;">Disk 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">B1</td>
<td style="text-align: center;">B2</td>
<td style="text-align: center;">B3</td>
<td style="text-align: center;">B4</td>
</tr>
<tr class="even">
<td style="text-align: center;">P1</td>
<td style="text-align: center;">B5</td>
<td style="text-align: center;">B6</td>
<td style="text-align: center;">B7</td>
</tr>
<tr class="odd">
<td style="text-align: center;">B8</td>
<td style="text-align: center;">P2</td>
<td style="text-align: center;">B9</td>
<td style="text-align: center;">B10</td>
</tr>
<tr class="even">
<td style="text-align: center;">...</td>
<td style="text-align: center;">...</td>
<td style="text-align: center;">...</td>
<td style="text-align: center;">...</td>
</tr>
</tbody>
</table>
<p><strong>Solution</strong></p>
<p>Note that P1 is the parity block for blocksB1toB4. In a system with only 1 parity block we can lose at most one block. If more are lost we can not reconstruct the data. In the proposed scenario we can see an issue if disk 1 breaks down. In that case we will lose two blocks and reconstruction will not be possible. This is not a valid distribution of blocks.</p>
<h2 id="indexing">Indexing</h2>
<h3 id="exercise-4">Exercise 4</h3>
<ul>
<li><p>What is the difference between a sparse and dense index?</p>
<ul>
<li>A dense index contains references to all unique values of a certain attribute.</li>
<li>A sparse index doesn’t.</li>
</ul></li>
<li><p>What is the difference between a primary and secondary index?</p>
<ul>
<li>In this context we are talking about sequential (ordered) files. This means that the records have a certain order, determined by one or more attributes.
<ul>
<li>A primary index is an index on top of the attribute(s)that determine the order.<br />
</li>
<li>A secondary index is an index on top of any of the other attributes.</li>
</ul></li>
</ul></li>
<li><p>Why is a secondary index always dense? What would happen if it was not?</p>
<ul>
<li><p>Imagine that we’re looking for all records where attribute A equals value X. If we look this up in a primary index we get the position of the first record where A = X.</p>
<p>Since attribute A determines the order (otherwise there would be no primary index on A), if there are other records with A = X we know that they will come immediately after the one given to us by the index.</p>
<p>However, this is not the case with a secondary index. Since a secondary index is an index on top of an unordered attribute it is not sufficient to only point to the first occurrence.</p>
<p>This is because there might be other records where A = X and they will not necessarily be immediately after the record pointed to by the index.</p></li>
</ul></li>
<li><p>When do we prefer a dense index over a sparse index?</p>
<ul>
<li>In general a dense index will be faster for looking up data. However, sparce indices require less storages pace and less maintenance (e.g. index updates when we modify the database content).<br />
</li>
<li>In other words,we use a dense index when the advantages outweigh the overhead and storage requirements.</li>
</ul></li>
<li><p>Given that an index can speed up queries a lot, why don’t we place indices over all attributes?</p>
<ul>
<li>First of all, an index requires quite some storage space. Second, an index requires maintenance when the original database is modified which in turn requires quite some CPU, IO and RAM.</li>
</ul></li>
</ul>
<h3 id="exercise-5">Exercise 5</h3>
<p>Construct a B+-tree for the following key values: (1, 4, 7, 10, 17, 21, 31, 25, 19, 20). Do this in order, step by step (start with a tree for the value 1, then add 4, then add 7, ...). Assume n=4. A balanced B+-tree has the following properties:</p>
<ul>
<li><p>Leaf nodes have between (n−1)/2 (rounded up) and n−1 values.</p></li>
<li><p>Non-leaf nodes have between n/2 (rounded up) and n children.</p></li>
<li><p>If the root node is not a leaf node, it has at least 2 children.</p>
<p>Otherwise it has between 0 and n−1 values.</p></li>
</ul>
<p>To add values to the tree, we use the following rules:</p>
<ul>
<li>Start at the root node and iterate over its values from left to right. Follow a pointer downwards right BEFORE you encounter a value equal or greater than the one we are trying to add.</li>
<li>Keep on going down in a similar way until we reach a leaf node.</li>
<li>If there is still space in the leaf node, we siply add it, but make sure the values remain sorted.</li>
<li>If the leaf node is full, we need to split it into two new nodes. Sort all values (including the value we want to add) and place (n−1)/2 (rounded up) values in the first new node and the rest in the second. We also add the smallest value of the second node in the parent of the old node and fix the pointers where needed.</li>
<li>In the previous step it’s possible that the parent node is also full. When a non-leaf is full,we also split it into two new nodes. Sort all values (including the value we want to add) and place (n/2)−2 (rounded up) values in the first new node and the rest in the second. We move the smallest value in the second node to the parent of the old node and fix pointers where needed. If the parent is also full we repeat this step for the parent node.</li>
</ul>
<blockquote>
<p>Note: The non-leaf nodes are actually a multi-level sparse index for the leaf nodes!</p>
</blockquote>
<p><strong>Solution</strong></p>
<p>We use the method presented on the question sheet. A B+-tree with n=4 has nodes that contain 4 pointers and 3 values. Now can start to build a tree with the following values:{1,4,7,10,17,21,31,25,19,20}. We start with an empty node:</p>
<p><img src="/images/DB/image-20210821120454291.png" /></p>
<p>Now we add 1. There is still space in the node so we just add it as the first value of the node. Next we want to add 4. There is still space so we add it as the second value. The same applies to 7. We now have:</p>
<p><img src="/images/DB/image-20210821120443476.png" /></p>
<p>Next we want to add 10. There is no more space so we must split the node into two new nodes. It is a leaf node, so according to the rules we placed (n-1)/2 values in the left node, and the rest in the right node. For n=4 this means that two go left, the rest right. Next, the rule also tells us to copy the smallest value from the right node into the parent node. We now have:</p>
<p><img src="/images/DB/image-20210821120417850.png" /></p>
<p>Next we want to add 17. We start at the root node. 17 is larger than 7 so we follow the pointer on the right of 7. We arrive at the right leaf node. There is still space so we enter 17 as the third value of the right leaf node.</p>
<p>Next we want to add 21. We start at the root node. 21 is larger than 7 so we follow the pointer on the right of 7. We arrive at the right leaf node but there is no more space. We apply the splitting rule for leaf nodes. We split it into two nodes, 2 values go left, the rest right. We copy the smallest element from the second new node to the parent. We now have:</p>
<p><img src="/images/DB/image-20210821120345936.png" /></p>
<p>Next we want to add 31. We start at the root node and arrive at the third leaf node. There is still space so we enter 31 as the third value of the third leaf node.</p>
<p>Next we want to add 25. We start at the root node and arrive at the third leaf node. There is no more space so we must apply the splitting rule for leaf nodes and get:</p>
<p><img src="/images/DB/image-20210821120251900.png" /></p>
<p>Next we add 19. We start at the root node. 19 is larger than 17 but smaller than 25 so we follow the third pointer and arrive at the third leaf node. There is still space so we enter it as the second value of the third leaf node (values need to remain sorted within a node).</p>
<p>Now we will add 20. Again we arrive at the third leaf node but there is no more space. We use the usual splitting rule and get 5 leaf nodes in total. However, when we want to copy the smallest value from the second new node to the parent we see that it is also full. This means that we also have to split it. However,since it is not a leaf node the rule is slightly different. We put n/2-1 values left and the rest right.</p>
<p>For n=4 this means 1 value left, the rest right. The rule for non-leaf nodes also tells us to move the smallest value from the second new node to the parent (and not just copy). We get:</p>
<p><img src="/images/DB/image-20210821120151379.png" /></p>
<h2 id="hashing">Hashing</h2>
<h3 id="exercise-6">Exercise 6</h3>
<p>Hashing is another way to quickly find information. A hash function is a function that maps values onto a number of data-sets (buckets).</p>
<p>In the case of a database, a bucket usually corresponds to a disk block that contains multiple records. In other words , based on an input value – a hash function will tell you in which bucket you will find the information that corresponds with the value.</p>
<p>When a bucket contains multiple records, we then traverse the bucket sequentially until we find the information we are looking for. A hash function must be both uniform and random:</p>
<ul>
<li>Uniform: If we look at the set of all possible values, we want that each bucket is reached by more or less the same amount of values (eg if we have two buckets, 50% of the values should go to bucket 1 and 50% to bucket 2) .</li>
<li>Random: In the average case we want each bucket to contain more or less the same amount of values, regardless of their distribution. This means that things like order or length should not influence the hash function. In other words, it should look as if the hash function is producing seemingly random assignments regardless of input.</li>
</ul>
<p>Are the following hash functions uniform and/or random?</p>
<ul>
<li>We distribute the names of employees into 26 buckets, based on the first letter of their names.</li>
<li>We distribute employees into 10 buckets based on their annual salary. Employees earn a minimum of 30000 and a maximum of 130000. We divide this range in to 10 equal buckets with a range of 10000.</li>
<li>We distribute student IDs into 10 buckets and use modulo 10 to assign values to buckets (e.g. 23 becomes 3, 49 becomes 9, ...).</li>
</ul>
<p><strong>Solution</strong></p>
<ol type="1">
<li>Not uniform, we know that there more names starting with for instance a or c than names starting with x or z.</li>
<li>Uniform (10K options each), but not random.</li>
<li>Uniform but not random. If we input a sequence of increasing student id’s the hash function will output: 0,1,2,3,..9,0,1,2,3... which is not seemingly random.</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chaoqun Yin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://yintelligence.tech/2021/06/23/2021-06-23-Storage,-Indexing-&-Hashing/">https://yintelligence.tech/2021/06/23/2021-06-23-Storage,-Indexing-&-Hashing/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Chaoqun Yin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Databases/">
                                    <span class="chip bg-color">Databases</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/07/11/2021-07-11-Routing-Protocol-for-Low-Power-and-Lossy-Networks-(RPL)/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="Routing Protocol for Low Power and Lossy Networks (RPL)">
                        
                        <span class="card-title">Routing Protocol for Low Power and Lossy Networks (RPL)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-07-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Network/" class="post-category">
                                    Network
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Advanced-IT-Networks/">
                        <span class="chip bg-color">Advanced IT Networks</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/06/22/2021-06-22-JDBC/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="JDBC">
                        
                        <span class="card-title">JDBC</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-06-22
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Database/" class="post-category">
                                    Database
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Databases/">
                        <span class="chip bg-color">Databases</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'From: Chaoqun Yin<br />'
            + 'Author: Chaoqun Yin<br />'
            + 'Link: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Chaoqun Yin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "1";
                    var startDate = "28";
                    var startHour = "2";
                    var startMinute = "1";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/yintelligence" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:Yintelligence@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
